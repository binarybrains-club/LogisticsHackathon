---
import backgroundVideo from "@/assets/pool-dark.mp4";
---
<div class="fixed inset-0 -z-20 overflow-hidden">
  <video
    id="backgroundVideo"
    autoplay
    loop
    muted
    playsinline
    class="object-cover w-full h-full absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"
  >
    <source src={backgroundVideo} type="video/mp4" />
  </video>
</div>

<div class="fixed inset-0 bg-[#3CBD2C] mix-blend-multiply pointer-events-none -z-10"></div>

<div
  id="waterTexture"
  class="fixed inset-0 bg-[url('/LogisticsHackathon/pool-dark.png')] bg-repeat bg-[length:300%_300%] opacity-40 animate-waterEffect pointer-events-none -z-[9]"
>
</div>
<style>
  #backgroundVideo {
    @apply opacity-0 transition-opacity duration-1000;
    transition-timing-function: ease-in-out;
  }
  #backgroundVideo.loaded {
    @apply opacity-100;
  }
  @keyframes waterEffect {
    0% {
      background-position: 0 0;
    }
    100% {
      background-position: 100% 100%;
    }
  }

  .animate-waterEffect {
    animation: waterEffect 30s linear infinite;
  }
</style>
<script>
  document.getElementById("backgroundVideo")?.addEventListener(
    "loadeddata",
    (event) => (event.target as HTMLVideoElement).classList.add("loaded"),
  );
</script>
